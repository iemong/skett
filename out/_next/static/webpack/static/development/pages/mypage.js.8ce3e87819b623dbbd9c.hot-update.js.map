{"version":3,"file":"static/webpack/static/development/pages/mypage.js.8ce3e87819b623dbbd9c.hot-update.js","sources":["webpack:///./components/templates/mypage/index.tsx"],"sourcesContent":["import * as React from 'react'\nimport styled from '@emotion/styled'\nimport css from '@emotion/css'\nimport Main from 'components/templates/layouts/Main'\nimport { PostType } from 'types/index'\nimport useLogin from 'components/hooks/useLogin'\nimport firebaseApp from 'assets/utils/firebaseApp'\nimport { COLLECTIONS } from 'assets/constant'\nimport Card from 'components/molecules/card'\nimport useModal from 'components/hooks/useModal'\nimport TermsModal from 'components/molecules/modal/TermsModal'\nimport PrivacyPolicyModal from 'components/molecules/modal/PrivacyPolicyModal'\n\nconst MyPage = (): JSX.Element => {\n    const user = useLogin()\n\n    const db = firebaseApp.firestore()\n    const docRef = db.collection(COLLECTIONS.POSTS)\n    const [posts, setPosts] = React.useState<PostType[]>([])\n    const { isShowing: isShowingTerms, toggle: toggleTerms } = useModal()\n    const { isShowing: isShowingPrivacyPolicy, toggle: togglePrivacyPolicy } = useModal()\n\n    const loadPostsData = React.useCallback(async () => {\n        if (!user || posts.length) return\n        const data = await docRef\n            .where('user.uid', '==', user.uid)\n            .orderBy('timestamp', 'desc')\n            .get()\n            .catch(e => console.error(e))\n        if (!data) return\n        const docs = data.docs\n        const myPosts = docs.map(doc => doc.data() as PostType)\n        setPosts(myPosts)\n    }, [docRef, posts.length, user])\n\n    const isActiveFacebook = React.useMemo(\n        () => user?.providerData.map(data => data?.providerId).includes('facebook.com') || false,\n        [user],\n    )\n    const isActiveTwitter = React.useMemo(\n        () => user?.providerData.map(data => data?.providerId).includes('twitter.com') || false,\n        [user],\n    )\n\n    React.useEffect(() => {\n        loadPostsData()\n    }, [loadPostsData])\n\n    const myPosts = React.useMemo(\n        () =>\n            posts.map((post, index) => (\n                <CardWrapper key={index}>\n                    <Card\n                        key={index}\n                        imgUrl={post.imageUrl}\n                        description={post.title}\n                        link={`/posts/${post.id ?? ''}`}\n                        side={post.side}\n                    />\n                    <ButtonWrapper>\n                        <EditButton>編集</EditButton>\n                        <DeleteButton>削除</DeleteButton>\n                    </ButtonWrapper>\n                </CardWrapper>\n            )),\n        [posts],\n    )\n\n    return (\n        <Main>\n            <React.Fragment>\n                <LoginStatus>\n                    <Title>アカウント状況</Title>\n                    <ShareInner>\n                        <TwitterButton onClick={() => {}} isActive={isActiveTwitter} />\n                        <FacebookButton onClick={() => {}} isActive={isActiveFacebook} />\n                    </ShareInner>\n                    <TextWrapper>\n                        <Terms onClick={toggleTerms}>利用規約</Terms>\n                        <PrivacyPolicy onClick={togglePrivacyPolicy}>プライバシーポリシー</PrivacyPolicy>\n                    </TextWrapper>\n                    <TermsModal isShowing={isShowingTerms} toggle={toggleTerms} />\n                    <PrivacyPolicyModal isShowing={isShowingPrivacyPolicy} toggle={togglePrivacyPolicy} />\n                </LoginStatus>\n                <Past>\n                    <Title>過去に作成した声</Title>\n                </Past>\n                <div>{myPosts}</div>\n            </React.Fragment>\n        </Main>\n    )\n}\n\nexport default MyPage\n\nconst LoginStatus = styled.div`\n    width: 600px;\n    margin: 80px auto 40px;\n    padding: 80px 45px 60px;\n    box-sizing: border-box;\n    background-color: #fff;\n    border-radius: 16px;\n`\n\nconst Past = styled.div`\n    width: 600px;\n    margin: 40px auto 40px;\n    padding: 80px 45px 60px;\n    box-sizing: border-box;\n    background-color: #fff;\n    border-radius: 16px;\n`\n\nconst Title = styled.p`\n    position: relative;\n    margin-bottom: 55px;\n    padding-bottom: 33px;\n    font-size: 38px;\n    text-align: center;\n    color: #000;\n    &::before {\n        content: '';\n        position: absolute;\n        left: 50%;\n        bottom: 0;\n        width: 100px;\n        height: 5px;\n        background-image: linear-gradient(to left, #00b4ed, #0091db);\n        transform: translateX(-50%);\n    }\n`\n\nconst ShareInner = styled.div``\n\nconst AlreadyLogin = css`\n    content: 'ログイン済';\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    border-radius: 16px;\n    top: 0;\n    left: 0;\n    background-color: rgba(0, 0, 0, 0.4);\n    font-size: 30px;\n    color: #fff;\n`\n\nconst TwitterButton = styled.div<{ isActive: boolean }>`\n    position: relative;\n    display: block;\n    width: 510px;\n    height: 100px;\n    margin-bottom: 24px;\n    background-image: url(/img/svg/btn_twitter_login.svg);\n    &::after {\n        ${props => props.isActive && AlreadyLogin}\n    }\n`\n\nconst FacebookButton = styled.div<{ isActive: boolean }>`\n    position: relative;\n    display: block;\n    width: 510px;\n    height: 100px;\n    background-image: url(/img/svg/btn_facebook_login.svg);\n    &::after {\n        ${props => props.isActive && AlreadyLogin}\n    }\n`\n\nconst TextWrapper = styled.div`\n    display: flex;\n    flex-direction: column;\n    justify-content: center;\n    align-items: center;\n    margin: 60px auto;\n`\n\nconst Terms = styled.p`\n    margin-bottom: 50px;\n    font-size: 24px;\n    text-decoration: underline;\n`\n\nconst PrivacyPolicy = styled.p`\n    font-size: 24px;\n    text-decoration: underline;\n`\n\nconst CardWrapper = styled.div`\n    padding-bottom: 60px;\n`\n\nconst ButtonWrapper = styled.div`\n    display: flex;\n    width: 690px;\n    margin: 0 auto;\n    justify-content: space-between;\n`\n\nconst ButtonStyle = css`\n    width: 325px;\n    height: 80px;\n    background-color: #bdbdbd;\n    color: #fff;\n    font-size: 30px;\n    line-height: 80px;\n    text-align: center;\n    border-radius: 10px;\n`\n\nconst EditButton = styled.button`\n    ${ButtonStyle}\n`\n\nconst DeleteButton = styled.button`\n    ${ButtonStyle}\n`\n"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AADA;AAAA;AAAA;AACA;AAQA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAAA;AAAA;AAMA;AAAA;AACA;AAPA;AAEA;AACA;AAHA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AADA;AAQA;AACA;AAAA;AAAA;AACA;AACA;AAXA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAaA;AACA;AAAA;AAAA;AAAA;AAGA;AACA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AAEA;AACA;AACA;AACA;AADA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AACA;AACA;AACA;AACA;AALA;AAAA;AAAA;AAAA;AAAA;AAAA;AAOA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAXA;AADA;AAmBA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AACA;AAEA;AASA;AASA;AAmBA;AAEA;AAgBA;AAQA;AAAA;AAIA;AAOA;AAAA;AAIA;AAQA;AAMA;AAKA;AAIA;AAOA;AAWA;AAIA;;;;A","sourceRoot":""}