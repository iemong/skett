{"ast":null,"code":"import _taggedTemplateLiteral from \"@babel/runtime-corejs2/helpers/esm/taggedTemplateLiteral\";\nimport _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _asyncToGenerator from \"@babel/runtime-corejs2/helpers/esm/asyncToGenerator\";\nimport _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\n\nfunction _templateObject2() {\n  var data = _taggedTemplateLiteral([\"\\n    position: fixed;\\n    right: 0;\\n    bottom: 100px;\\n    display: block;\\n    width: 251px;\\n    height: 81px;\\n    background-image: url(/img/btn_add.png);\\n    color: transparent;\\n\"]);\n\n  _templateObject2 = function _templateObject2() {\n    return data;\n  };\n\n  return data;\n}\n\nfunction _templateObject() {\n  var data = _taggedTemplateLiteral([\"\\n    margin-top: 60px;\\n\"]);\n\n  _templateObject = function _templateObject() {\n    return data;\n  };\n\n  return data;\n}\n\nimport * as React from 'react';\nimport styled from '@emotion/styled';\nimport Link from 'next/link';\nimport Main from \"../layouts/Main\";\nimport Tab from \"../../organisms/tab\";\nimport Card from \"../../molecules/card\";\nimport firebaseApp from \"../../../assets/utils/firebaseApp\";\nimport { COLLECTIONS } from \"../../../assets/constant\";\n\nvar Home = function Home() {\n  var db = firebaseApp.firestore();\n  var docRef = db.collection(COLLECTIONS.POSTS);\n\n  var _React$useState = React.useState([]),\n      _React$useState2 = _slicedToArray(_React$useState, 2),\n      posts = _React$useState2[0],\n      setPosts = _React$useState2[1];\n\n  var loadPostsData = React.useCallback(\n  /*#__PURE__*/\n  _asyncToGenerator(\n  /*#__PURE__*/\n  _regeneratorRuntime.mark(function _callee() {\n    var data, docs, posts;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return docRef.orderBy('timestamp', 'desc').get()[\"catch\"](function (e) {\n              return console.error(e);\n            });\n\n          case 2:\n            data = _context.sent;\n\n            if (data) {\n              _context.next = 5;\n              break;\n            }\n\n            return _context.abrupt(\"return\");\n\n          case 5:\n            docs = data.docs;\n            posts = docs.map(function (doc) {\n              return doc.data();\n            });\n            setPosts(posts);\n\n          case 8:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  })), [docRef]);\n  React.useEffect(function () {\n    loadPostsData();\n  }, []);\n  var helpPosts = React.useMemo(function () {\n    return posts.map(function (post, index) {\n      var _post$id;\n\n      return __jsx(Card, {\n        key: index,\n        imgUrl: post.imageUrl,\n        description: post.title,\n        link: \"/posts/\".concat((_post$id = post.id) !== null && _post$id !== void 0 ? _post$id : ''),\n        side: 'help'\n      });\n    });\n  }, [posts]);\n  var supportPosts = React.useMemo(function () {\n    return posts.map(function (post, index) {\n      var _post$id2;\n\n      return __jsx(Card, {\n        key: index,\n        imgUrl: post.imageUrl,\n        description: post.title,\n        link: \"/posts/\".concat((_post$id2 = post.id) !== null && _post$id2 !== void 0 ? _post$id2 : ''),\n        side: 'support'\n      });\n    });\n  }, [posts]);\n\n  var helpPostElement = __jsx(ItemWrapper, null, helpPosts);\n\n  var supportPostElement = __jsx(ItemWrapper, null, supportPosts);\n\n  return __jsx(Main, null, __jsx(React.Fragment, null, __jsx(Tab, {\n    leftContent: helpPostElement,\n    rightContent: supportPostElement\n  }), __jsx(Link, {\n    href: '/register'\n  }, __jsx(AddButton, null, \"\\u58F0\\u306E\\u8FFD\\u52A0\"))));\n};\n\nexport default Home;\nvar ItemWrapper = styled.div(_templateObject());\nvar AddButton = styled.button(_templateObject2());","map":null,"metadata":{},"sourceType":"module"}